---
layout: post
title: 'Python下个人收支管理系统解决方案'
date: 2020-06-13
author: Wen Jian
cover: ''
tags: Python
---

> 这是同学的 Python 课程期末大作业~

## Python 下的个人收支管理系统

### 需求

1. 通过输入添加个人收入或支出，并写入到文件中保存
   输入格式：`收支明细类别代码（a/b+类目编码）,发生日期（年-月-日）,金额（浮点数）,备注（中文字符串）`
2. 根据输入时间（年-月）对当月的收支进行汇总，并进行输出：
   输出格式样例：
   ``` python
   收入/支出 明细类别 金额
   收入 生活费 2000
   ...
   总收入为XXX元；总支出为XXX元。
   ```
   其中，收入/支出通过当月该类目的金额正负进行判断；明细类别根据类目代码判断；金额在判断收入/支出时一同计算。
3. 在(2.)的基础上，给出该月份的收支的明细：
   输出格式样例：
   ``` python
   类别 收⼊/⽀出 发⽣⽇期 ⾦额 备注
   ⽣活费 收⼊ 2020-03-01 2000.0 3⽉⽣活费
   学习⽤品 ⽀出 2020-03-03 10.0 买钢笔
   ...
   ```

### 解决方案（建议）

1. 针对需求1，对于输入的收支信息，可封装为结构体进行保存，结构体包含：收入或支出，类目编码（也可以先处理为类目的中文字符串），发生日期（可进一步拆分为年、月、日），金额，备注；对结构体的封装在输入数据时同步进行，可能涉及字符串的处理。
   ps. 对于这个程序而言结构体并不是最优的选择，因为程序中途可能会多次打开再关闭。也可以将这些内容存在另一个文件中。这一步其实只要做到一点，那就是能够方便快速地找到每一条收支信息的时间、金额、类别等，便于后续的操作。
2. 针对需求2，对每个类别单独设置一个sum变量（可以开数组，也可以开结构体方便对应类目），初始化为0。接着逐行读入记录收支信息的文件，先判定时间（年相等，月相等），再根据类目编码找到对应的sum变量，接着进行计算，如果是收入就+，支出就-。同时设置income，budget，在读入文件的时候同时计算总收入和总支出。
   文件读入结束后，再准备输出。逐个访问之前的sum变量：
   
   sum=0：不输出
   
   sum<0：支出，其绝对值为金额
   
   sum>0：收入，其绝对值为金额
   
3. 针对需求3，再次从头到尾读入收支明细文件，判定时间（年相等，月相等），若相等，再根据输出格式进行输出。

### 程序框架（建议）

1. 主菜单界面：包含三个选项（每个选项对应一个函数例如输入'A'选1，输入'B'选2...）
   1. 输入类目信息
      一边输入，一边处理，可以设置“输入N以结束输入”。结束输入后，返回主菜单。
   2. 收支统计
      在解决方案中已经讲的比较清楚了。先输出每月的统计与总支出，总收入。接着询问是否输出当月明细，是：实现需求3。结束后返回主菜单。
   3. 结束程序
2. 框架伪代码：（中括号括起来表示一个函数）
   ``` python
   永真循环
   {
     【主菜单界面模块，判定输入的选项】
      if(选A)
        【输入类目信息模块】
              实现功能
              返回主菜单（用continue）
      if(选B)
        【收支统计】
              实现需求2
              询问是否输出明细，若是，则：
             【调用需求3的实现函数】
                  实现需求3
              返回主菜单（用continue）
      if(选C)
         退出程序（用break） 
   }
   ```
